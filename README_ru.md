# flow-forge-engine: исполняющий модуль проекта FlowForge

## Что это

Это то, с помощью чего выполняются экземпляры шаблонов, составленные из блоков, соединённых линиями.  
Это то, с помощью чего экземпляры процедур запускаются на выполнение.  
В идеале - нет никаких внутренних, проектных, зависимостей.

```Java

// Процедура 1:
// (входные данные) -> [block-1: выполняет этап 1] --> [block-2: выполняет какой-то этап] --> [block-N: выполняет этап N]
// На уровне кода каждый блок получает текст и возвращает текст: входные данные блока и результаты работы блока.
// Преобразование текста - задача прикладного кода, если она вообще нужна. (Например, на входе - json, на выходе json, или на входе промпт в виде простого текста и на выходе тоже простой текст или текст со ссылками.)

// Псевдокод.

// Создаём блоки.
List<Block> blocks = new ArrayList<>(Arrays.asList(
    new Block("block-1", ...),
    new Block("block-2", ...),
    new Block("block-3", ...)
));

// Создаём линии.
List<Line> lines = new ArrayList<>(Arrays.asList(
    new Line("block-1", "block-2", ...),
    new Line("block-2", "block-3", ...)
));

// Создаём экземпляр процедуры.
// Внутри экземпляра производится взаимное разрешение связей блоков и линий.
Instance instance = new Instance("Calculate some", blocks, lines);

// Добавляем экземпляр в очередь выполнения.
Parameters parameters = new Parameters(
    new ArrayList(Arrays.asList(
        new Parameter("block-1", "<входные данные блока в виде текста...>"),
        ...
    ))
);
// instanceExecutor - это нечто, выполняющее цепочки блоков.
// Какой-то сервис, доступный экземпляр какого-то класса, который может
// выполнять процедуры, используя в т.ч. многопоточность.
instanceExecutor.add(instance, parameters, ...);

// Для реального выполнения экземпляров что-то в коде должно 
// вызывать основной метод выполнения:
instance.run();
// Это может быть тик таймера, событие, проход цикла (худший вариант) и т.п.

// Результаты выполнения почти всегда _лучше_ получать по запросу,
// с настраиваемой частотой и в требуемых объёмах.
String results = instanceExecutor.getResults(instance.getName(), ...);

// Результаты (results) проще и универсальнее всего получать тоже в виде текста.
// Это может быть json, например, содержащий связки типа
//      имя-блока:выходные-данные-блока.

// Можно также ставить экземпляр на паузу, останавливать экземпляр или даже 
// прерывать немедленно. Результат этих воздействий зависит от реализации
// каждого конкретного блока.
```

flow-forge-engine - это часть проекта FlowForge, в идеале никак не связанная с остальными частями проекта.  
То есть при желании можно использовать в коде только эту часть для запуска собственных процедур.

## Быстрый старт

## Лицензирование

This module is part of the FlowForge project and follows the same licensing terms.

## Автор

Константин Терских
Email: <kostus.online.1974@yandex.ru>, <kostus.online@gmail.com>
Санкт-Петербург, 2025 год
